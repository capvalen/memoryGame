<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<style>
	.btn-morado{
		background-color:#5c08ac;border: 1px solid #5c08ac;color: white; 
	}
	.btn-morado:hover{
		background-color: #40116d; color: white; 
	}
</style>
<div id="app">
	
	<section v-if="etapa =='inicial'">
		<div class="bg-secondary text-light p-2">
			<p class="fs-3 fw-bold text-center">Copia y pega abajo el texto que quieres Agileer</p>
		</div>
		<div class="my-2" id="textoInicial">
			<textarea class="form-control" rows="5" v-model="textoInicial">
			</textarea>
			<div class="mt-2 d-grid d-flex justify-content-center">
				<button class="btn btn-danger " @click="inciarAplicativo()"><span class="fs-5">COMENZAR AGILECTURA</span></button>
			</div>
		</div>
	</section>
	<section id="aplicativo" :class="{ 'd-none': etapa!='aplicativo'}">
		<div class="row">
			<div class="col-sm-6">
				<button class="btn btn-warning"><i class="bi bi-arrow-left"></i></button>
			</div>
			<div class="col-sm-6 " v-show="!verSubConfiguracion">
				<div class="d-grid gap-2 d-md-flex justify-content-md-end">
					<button class="btn btn-morado px-4 "><i class="bi bi-window-split"></i></button>
					<button class="btn btn-primary px-4 "><i class="bi bi-scissors"></i></button>
					<button class="btn btn-warning px-4 "><i class="bi bi-eye"></i></button>
					<button class="btn btn-success px-4 "><i class="bi bi-circle-fill"></i></button>
					<button class="btn btn-danger px-4 " @click="verSubConfiguracion=true"><i class="bi bi-gear"></i></button>
				</div>
			</div>
		</div>
		<div class="card my-1" v-if="verSubConfiguracion">
			<div class="card-body">
				<div class="row row-cols-5">
					<div class="col">
						<label for="">Palabras por minuto</label>
						<input type="number" class="form-control" v-model="palabrasxMinuto">
					</div>
					<div class="col">
						<label for=""># Palabras</label>
						<input type="number" class="form-control" v-model="numPalabras" @change="calcularPreview()">
					</div>
					<div class="col">
						<label for="">Tamaño de fuente</label>
						<select name="" id="" class="form-select" v-model="fuente_tamano" @change="cambiarTamano()">
							<option v-for="fuente in fuentes" :value="fuente">{{fuente}}</option>
						</select>
					</div>
					<div class="col">
						<label for="">Tipo de fuente</label>
						<select name="" id="" class="form-select" >
							<option value="1">Liviano</option>
							<option value="2" selected>Normal</option>
							<option value="3">Negrita</option>
						</select>
					</div>
					<div class="col-1 d-grid align-items-end">
						<button class="btn btn-info" @click="verSubConfiguracion=false"><i class="bi bi-check-lg"></i></button>
					</div>
				</div>
			</div>
		</div>
		<div class="alert alert-primary my-2" role="alert" v-if="etapa=='aplicativo'">
			Estás a punto de leer <b>{{ totalPalabras }}</b> palabras distribuidas entre <b>{{ lineasLeer }}</b> Líneas de <b>{{ numPalabras }} palabras cada una</b>, a una velocidad de <b>{{ palabrasxMinuto }} PPM (Palabras Por Minuto).</b> Aquí abajo tienes una previsualización de la línea más ancha de tu texto, con la configuración actual. Configura el tamaño y el estilo del texto haciendo clic en el botón <strong><i class="bi bi-gear-fill"></i></strong> y personaliza tu experiencia con Agilector antes de empezar. Una vez lo hayas hecho, haz clic en el botón “Empezar Lectura” para empezar a leer.
		</div>
		<div v-if="etapa=='aplicativo'" id="preview" class="text-center">
			{{preview}}
		</div>
		<div class="mt-2 d-grid d-flex justify-content-center" v-if="!verSubConfiguracion">
			<button class="btn btn-danger " @click="empezarLectura()"><span class="fs-5">EMPEZAR LECTURA</span></button>
		</div>
	</section>
	<section>
		<div v-if="etapa=='lectura'" id="lectura"></div>
		<div id="pausas" class="d-grid gap-2 d-flex justify-content-center">
			<button class="btn bg-secondary-subtle btn-lg rounded-1 mx-1" title="Comenzar"><i class="bi bi-play-fill"></i></button>
			<button class="btn bg-secondary-subtle btn-lg rounded-1 mx-1" title="Pausar"><i class="bi bi-pause-fill"></i></button>
			<button class="btn bg-secondary-subtle btn-lg rounded-1 mx-1" title="Comenzar de nuevo"><i class="bi bi-arrow-clockwise"></i></button>
		</div>
	</section>

</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script>
	const { createApp } = Vue

	createApp({
		data() {
			return {
				textoInicial: "Para empezar, sólo tienes que copiar y pegar cualquier texto que te gustaría leer en este cuadro de texto. Agilector te ayudará a leer más rápido mostrando cada palabra o grupo de palabras durante sólo un instante, utilizando lo que se llama una Presentación Rápida de Series Visuales para aumentar tu velocidad de lectura. En el menú de ajustes, puedes determinar a qué velocidad quieres leer (palabras por minuto). También puedes elegir el número de palabras que te gustaría ver a la vez (tamaño del fragmento). Y también puedes elegir el tamaño y el tipo de fuente que prefieras. De esta forma, tu experiencia será lo más personalizada posible. Para ser lo más productivo posible con Agilector, es importante que practiques siempre con una velocidad un poco superior a tu velocidad cómoda de leer. Una vez hayas guardado la configuración, presiona el botón “Agilectura” para empezar a leer.",
				etapa: 'lectura', numPalabras: 4, palabrasxMinuto:100, verSubConfiguracion:false, fuentes:[], peso:2, fuente_tamano:50, preview:''
			}
		},
		mounted(){
			for (let index = 10; index <= 80; index+=5) {
				this.fuentes.push(index)
			}
			this.calcularPreview();
		},
		methods:{
			inciarAplicativo(){
				this.etapa='aplicativo'
			},
			empezarLectura(){
				this.etapa = 'lectura'
			},
			calcularPreview(){
				let temporal = this.textoInicial.split(' ').slice(0,this.numPalabras);
				this.preview = temporal.join(' ');
			},
			cambiarTamano(){
				document.getElementById('preview').style.fontSize = `${this.fuente_tamano}px`
				document.getElementById('lectura').style.fontSize = `${this.fuente_tamano}px`
			}
		},
		computed:{
			totalPalabras (){
				return  this.textoInicial=='' ?  0 : this.textoInicial.trim().split(' ').length;
			},
			lineasLeer(){
				return parseFloat(this.totalPalabras / this.numPalabras).toFixed(0);
			}
		}
	}).mount('#app')
</script>
<style>
	#preview{
		font-size: 50px;

	}
</style>